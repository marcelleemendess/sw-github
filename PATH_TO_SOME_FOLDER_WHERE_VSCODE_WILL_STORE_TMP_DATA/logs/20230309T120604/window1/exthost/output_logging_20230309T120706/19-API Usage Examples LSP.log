Logger Init
Initialization complete.
Cached supported calls version 1.17
Loaded supported calls (Version 1.17)
Batch of 1 Total time: 181ms (Avg. Per Call: 181ms)
Batch of 3 Total time: 174ms (Avg. Per Call: 58ms)
Batch of 1 Total time: 217ms (Avg. Per Call: 217ms)
/Users/marcellemendes/.vscode/extensions/visualstudioexptteam.intellicode-api-usage-examples-0.2.7/dist/server/server.js:2
(()=>{var e={4614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeSearchProviders=void 0;const n=r(1017),i=r(7147),a=r(9754),o=r(4490),s=r(3885),c=r(7373),l=(0,n.join)(__dirname,"gaia-lib-python","tree-sitter-python.wasm"),u=(0,n.join)(__dirname,"gaia-lib-typescript","node_modules","typescript","lib"),d=5e3;function p(e){return async()=>{try{return(await i.promises.readFile(e)).toString()}catch(e){if("ENOENT"==e.code)return"";throw e}}}function _(e){return async t=>{await i.promises.writeFile(e,t)}}t.CodeSearchProviders=class{constructor(e,t,r){this.logger=e,this.globalStorageUri=t,this.endpoint=r}getApiExampleProviderPy(){const e=c.Utils.joinPath(this.globalStorageUri,"supported_calls.json");return o.ApiExampleProviderPy.createInstance(this.logger,l,{version:a.ServiceVersion.V1,endpoint:this.endpoint},p(e.fsPath),_(e.fsPath),d)}getApiExampleProviderTs(){const e=c.Utils.joinPath(this.globalStorageUri,"typescript_supported_calls.json");return s.ApiExampleProviderTs.createInstance(this.logger,u,{endpoint:this.endpoint},p(e.fsPath),_(e.fsPath),d)}getApiExampleProviderJs(){const e=c.Utils.joinPath(this.globalStorageUri,"javascript_supported_calls.json");return s.ApiExampleProviderJs.createInstance(this.logger,u,{endpoint:this.endpoint},p(e.fsPath),_(e.fsPath),d)}}},6904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentQueueProcessor=t.MAX_QUEUE_LENGTH=void 0;const n=r(2872),i=r(2036);t.MAX_QUEUE_LENGTH=20,t.DocumentQueueProcessor=class{constructor(e,t){this.documents=e,this.gaiaServer=t,this.cachedDocuments=new Map,this.busyProviders=new Set,this.documentQueues=new Map,this.processDocument=new n.Subject,this.gaiaServer.onHoverRequested.subscribe((e=>{if(!this.documentQueues)return;const t=this.documents.get(e.uri)?.version;t&&this.cachedDocuments.get(e.uri)!==t&&!this.documentQueues.get(e.languageId)?.includes(e.uri)&&(this.documentQueues.has(e.languageId)||this.documentQueues.set(e.languageId,[]),this.documentQueues.get(e.languageId).push(e.uri))})),this.processDocument.subscribe((async e=>{try{const t=this.gaiaServer.getProvider(e.languageId);if(!t)return;await t.addOrUpdateDocument(e.uri,e.getText()),this.cachedDocuments.set(e.uri,e.version)}finally{this.busyProviders.delete(e.languageId)}}))}start(){this.documents.all().forEach((e=>{this.gaiaServer.onProviderReady(e.languageId)?.subscribe((()=>{this.addDocumentToQueue(e)}))})),this.processElementInterval=setInterval((()=>this.processNextElement()),3e3)}documentOpened(e){this.addDocumentToQueue(e)}documentClosed(e){this.removeDocumentFromQueue(e),this.cachedDocuments.has(e.uri)&&(this.cachedDocuments.delete(e.uri),this.gaiaServer.getProvider(e.languageId)?.removeDocument(e.uri))}documentChanged(e){this.processElementInterval&&clearInterval(this.processElementInterval),this.addDocumentToQueue(e),this.processElementInterval=setInterval((()=>this.processNextElement()),3e3)}processNextElement(){if(this.documentQueues)for(const e of i.supportedLanguagesMap){const t=this.documentQueues.get(e);if(t&&t.length>0){if(this.busyProviders.has(e))continue;const r=t.pop();if(!r)continue;const n=this.documents.get(r);if(!n)continue;this.busyProviders.add(e),this.processDocument.next(n);break}}}addDocumentToQueue(e){if(!i.supportedLanguagesMap.has(e.languageId))return;this.cachedDocuments.has(e.uri)&&this.cachedDocuments.delete(e.uri),this.documentQueues.has(e.languageId)||this.documentQueues.set(e.languageId,[]);const r=this.documentQueues.get(e.languageId);!r.includes(e.uri)&&r.length<t.MAX_QUEUE_LENGTH&&r.push(e.uri)}removeDocumentFromQueue(e){const t=this.documentQueues.get(e.languageId);if(!t)return;const r=t.indexOf(e.uri);r>=0&&t.splice(r,1)}}},1513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GaiaServer=void 0;const n=r(2036),i=r(5809),a=r(2872),o=r(2036);t.GaiaServer=class{constructor(e,t,r){this.providerBuilder=e,this.connection=t,this.languages=r,this.onHoverRequested=new a.Subject,this.providers=new Map,this.initializedProviders=new Map,this.client_apis=new Map,this.subscribeToConnection()}onProviderReady(e){const t=this.providers.get(e);if(t)return t.pipe((0,a.first)());if(n.supportedLanguagesMap.has(e)&&this.isLanguageEnabled(e)){const t=new a.ReplaySubject(1);return this.providers.set(e,t),this.buildProvider(e).then((r=>{this.initializedProviders.set(e,r),t.next(r)})),t.pipe((0,a.first)())}}isLanguageEnabled(e){switch(e){case n.SupportedLanguages.JAVASCRIPT:case n.SupportedLanguages.TYPESCRIPT:case n.SupportedLanguages.JAVASCRIPTREACT:case n.SupportedLanguages.TYPESCRIPTREACT:return this.languages.typescript;case n.SupportedLanguages.PYTHON:return this.languages.python;default:return!1}}getProvider(e){return this.initializedProviders.get(e)}async submitFeedback(e,t,r,n,i){this.onProviderReady(n)?.subscribe((async n=>{await n.addExampleFeedback(e,r,i,t)}))}subscribeToConnection(){const e=new i.ProtocolRequestType(n.Requests.GetIdAtPosition);this.connection.onRequest(e,(async e=>{const t=this.initializedProviders.get(e.languageId);if(!t)return;const r=t.getContent(e.documentId,e.position);if(!r)return void this.onHoverRequested.next({languageId:e.languageId,uri:e.documentId});const n={call_signature:r.call_signature,apiResult:void 0,fullCallSummary:void 0};return this.isSentToClient(e.languageId,r.call_signature)||(n.apiResult=JSON.stringify(r),n.fullCallSummary=JSON.stringify(Array.from(r.full_call_summary.entries())),this.markSentToClient(e.languageId,r.call_signature)),n}));const t=new i.NotificationType(o.Notifications.ClearLanguageCache);this.connection.onNotification(t,(e=>{this.clearClientCache(e.languageId)}))}markSentToClient(e,t){if(!this.client_apis.has(t)){var r=new Set;this.client_apis.set(t,r)}const n=this.client_apis.get(t);n&&!n.has(e)&&n.add(e)}isSentToClient(e,t){return!!this.client_apis.has(t)&&!!this.client_apis.get(t)?.has(e)}clearClientCache(e){this.client_apis.get(e)?.clear()}async buildProvider(e){switch(e){case n.SupportedLanguages.PYTHON:return await this.providerBuilder.getApiExampleProviderPy();case n.SupportedLanguages.JAVASCRIPT:return await this.providerBuilder.getApiExampleProviderJs();case n.SupportedLanguages.TYPESCRIPT:return await this.providerBuilder.getApiExampleProviderTs();case n.SupportedLanguages.JAVASCRIPTREACT:return await this.providerBuilder.getApiExampleProviderJs();case n.SupportedLanguages.TYPESCRIPTREACT:return await this.providerBuilder.getApiExampleProviderTs();default:throw Error(`An attempt was made to create a provider with an unsupported language ${e}`)}}}},5375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerLogger=void 0;const n=r(9754);class i extends n.LoggingService{constructor(e,t){super((t=>e.console.log(t)),t),this.info("Logger Init")}}t.ServerLogger=i},2596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiExampleProviderPy=void 0;const n=r(9401),i=r(1175),a=r(9410),o=r(5223),s=r(6815);class c extends i.ApiExampleProviderBase{constructor(e,t,r,i,s){super(e,(0,a.createServiceConfig)(n.LanguageId.PYTHON,t),r,i,s),this.treeSitterManager=new o.TreeSitterManager}static async createInstance(e,t,r,i,a,o){const s=new c(e,r,i,a,o);return await s.supportedCallsManager.initialize(),await s.treeSitterManager.initialize(n.LanguageId.PYTHON,t),s}initializeCallExtractor(){return new s.CallExtractorPy(this.logger,this.treeSitterManager.getParser(n.LanguageId.PYTHON),this.supportedCallsManager,this.serviceConfig,this.callSignatureToExamples)}}t.ApiExampleProviderPy=c},6815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallExtractorPy=void 0;const n=r(7175),i=r(7724),a=r(4506),o=r(6158),s=r(7e3),c=r(6262),l=r(4537);class u extends o.NodeVisitor{constructor(e,t,r,i,a){super(e),this.scope=new s.Scope,this.callExtractorBase=new n.CallExtractorBase(e,i,a),this.parser=t,this.supportedCalls=r}visit_class_definition(e){const t=e.firstNamedChild;t&&this.scope.enterClass(this.getSourceText(t),(()=>{this.genericVisit(e)}))}visit_function_definition(e){const t[Info  - 12:49:58 PM] Connection to server got closed. Server will restart.
